(this["webpackJsonpmercury-weather-forecast"]=this["webpackJsonpmercury-weather-forecast"]||[]).push([[0],[,,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var c=a(1),n=a.n(c),r=a(4),s=a.n(r),i=(a(9),a(2)),o=(a(10),a(11),a(12),a.p+"static/media/forecast-placeholder.1a743710.svg"),l=(a(13),a(0));var d=function(e){var t=e.placeholder,a=e.options,n=e.onChangeOption,r=Object(c.useState)(!1),s=Object(i.a)(r,2),o=s[0],d=s[1],u=Object(c.useState)(""),h=Object(i.a)(u,2),j=h[0],m=h[1],f=a?a.map((function(e){return Object(l.jsx)("option",{value:e.id,children:e.name},e.id)})):null;return Object(l.jsx)("div",{className:"select-component "+(o?"select-component_active":""),onBlur:function(){return d(!1)},children:Object(l.jsxs)("select",{className:"select-component__select "+(""===j?"select-component__select_empty":""),onFocus:function(){return d(!0)},onChange:function(e){var t=a.find((function(t){return t.id.toString()===e.target.value.toString()}));m(e.target.value.toString()),t&&n(t)},children:[Object(l.jsx)("option",{value:"",hidden:!0,style:{color:"red"},children:t}),f]})})};a(15);var u=function(e){var t=e.placeholder,a=e.minDate,n=e.maxDate,r=e.onChangeDate,s=Object(c.useState)(!1),o=Object(i.a)(s,2),d=o[0],u=o[1];return Object(l.jsx)("div",{className:"date-input-component "+(d?"date-input-component_active":""),onBlur:function(){return u(!1)},children:Object(l.jsx)("input",{type:"date",min:a,max:n,placeholder:t,className:"date-input-component__input",onClick:function(){return u(!0)},onChange:function(e){var t=new Date(e.target.value);r(t)}})})},h={oneDayOffset:864e5,getDateString:function(e){var t=e.getDate(),a=e.getMonth()+1;return t<10&&(t="0"+t),a<10&&(a="0"+a),(e.getFullYear()+"-"+a+"-"+t).toString()},convertDateTimeToUTCTime:function(e){return Math.floor(e/1e3)},convertUTCTimeToDate:function(e){return new Date(1e3*e)},convertDateToUserView:function(e){return"".concat(e.getDate()," ").concat(function(e){switch(e+1){case 1:return"jan";case 2:return"feb";case 3:return"mar";case 4:return"apr";case 5:return"may";case 6:return"june";case 7:return"july";case 8:return"aug";case 9:return"sept";case 10:return"oct";case 11:return"nov";case 12:return"dec";default:return""}}(e.getMonth())," ").concat(e.getFullYear())}},j=function(e){var t=[];for(var a in e)t.push(encodeURIComponent(a)+"="+encodeURIComponent(e[a]));return t.join("&")},m="dd0c5383ed3ef5146baae1a53c5225f6",f={getWeatherIconURL:function(e){return"".concat("http://openweathermap.org/img/wn/").concat(e,"@2x.png")},getPastDayForecast:function(e,t,a){var c={lat:e.latitude,lon:e.longitude,appid:m,dt:t,units:"metric"};fetch("https://api.openweathermap.org/data/2.5/onecall/timemachine?".concat(j(c))).then((function(e){return e.json()})).then((function(e){var t=e.current;if(!t)return e.message&&alert(e.message),void a(null);var c={date:h.convertDateToUserView(h.convertUTCTimeToDate(t.dt)),temperature:Math.round(t.temp),weather:{title:t.weather[0].main,iconId:t.weather[0].icon}};a(c)})).catch((function(e){console.log(e),a(null)}))},getSevenDaysForecast:function(e,t){var a={lat:e.latitude,lon:e.longitude,appid:m,units:"metric"};fetch("https://api.openweathermap.org/data/2.5/onecall?".concat(j(a))).then((function(e){return e.json()})).then((function(e){if(!e.daily)return e.message&&alert(e.message),void t(null);var a=e.daily.slice(1).map((function(e){return{date:h.convertDateToUserView(h.convertUTCTimeToDate(e.dt)),temperature:Math.round(e.temp.day),weather:{title:e.weather[0].main,iconId:e.weather[0].icon}}}));t(a)})).catch((function(e){console.log(e),t(null)}))}};a(16);var p=function(e){var t=e.isAdaptiveWidth,a=e.isLoading,c=e.dayForecast;return Object(l.jsxs)("div",{className:"weather-card "+(t?"weather-card_adaptive-width ":"")+(a?"weather-card_loading ":""),children:[Object(l.jsx)("div",{className:"weather-card__top",children:Object(l.jsx)("p",{className:"weather-card__date",children:c?c.date:""})}),Object(l.jsx)("div",{className:"weather-card__middle",children:!!c&&Object(l.jsx)("img",{src:f.getWeatherIconURL(c.weather.iconId),alt:c.weather.title,title:c.weather.title,className:"weather-card__weather-icon"})}),Object(l.jsx)("div",{className:"weather-card__bottom",children:Object(l.jsx)("p",{className:"weather-card__temperature",children:c?(c.temperature>0?"+":"")+c.temperature+"\xb0":""})})]})};var b=function(e){var t=e.isSingleDateForecast,a=e.cities,n=e.forecastData,r=e.isLoading,s=e.changeSelectedCity,j=e.changeSelectedDate,m=Object(c.useState)(!0),f=Object(i.a)(m,2),b=f[0],g=f[1],O=Object(c.useState)(!1),v=Object(i.a)(O,2),_=v[0],x=v[1],w=new Date;w.setTime(w.getTime()-h.oneDayOffset);var D=h.getDateString(w),S=new Date;S.setTime(S.getTime()-5*h.oneDayOffset);var N=h.getDateString(S),y=Object(c.useRef)(null),T=t?n?Object(l.jsx)("div",{style:{margin:"10px 0",width:"100%"},children:Object(l.jsx)(p,{isAdaptiveWidth:!0,dayForecast:n,isLoading:r})}):null:n?Object(l.jsxs)("div",{className:"cards-carousel",children:[Object(l.jsx)("div",{className:"cards-carousel__slides",ref:y,onScroll:function(e){0===e.target.scrollLeft?(g(!0),x(!1)):e.target.scrollLeft===e.target.scrollWidth-e.target.offsetWidth?(g(!1),x(!0)):(g(!1),x(!1))},children:n&&n.map((function(e){return Object(l.jsx)("div",{children:Object(l.jsx)(p,{isAdaptiveWidth:!1,dayForecast:e,isLoading:r})},e.date)}))}),Object(l.jsx)("button",{className:"cards-carousel__switch-button cards-carousel__switch-button_left "+(b?"cards-carousel__switch-button_disabled":""),onClick:function(){if(y&&y.current){var e=y.current;e.scroll(e.scrollLeft-184,0)}}}),Object(l.jsx)("button",{className:"cards-carousel__switch-button cards-carousel__switch-button_right "+(_?"cards-carousel__switch-button_disabled":""),onClick:function(){if(y&&y.current){var e=y.current;e.scroll(e.scrollLeft+184,0)}}})]}):null,C=!n&&Object(l.jsxs)("div",{className:"forecast-card__placeholder",children:[Object(l.jsx)("img",{src:o,alt:"Cloud",className:"forecast-card__placeholder-image"}),Object(l.jsx)("span",{className:"forecast-card__placeholder-title",children:"Fill in all the fields and the weather will be displayed"})]});return Object(l.jsxs)("div",{className:"forecast-card",children:[Object(l.jsx)("div",{className:"forecast-card__header "+(t?"forecast-card__header_long-title":""),children:Object(l.jsx)("h1",{className:"forecast-card__title",children:t?"Forecast for a Date in the Past":"7 Days Forecast"})}),Object(l.jsxs)("div",{className:"forecast-card__search-bar",children:[Object(l.jsx)(d,{placeholder:"Select city",options:a,onChangeOption:function(e){return s(e,t)}}),t&&Object(l.jsx)(u,{placeholder:"Select date",minDate:N,maxDate:D,onChangeDate:j})]}),Object(l.jsxs)("div",{className:"forecast-card__information",children:[C,T,Object(l.jsx)("div",{})]})]})};var g=function(){var e=Object(c.useState)(null),t=Object(i.a)(e,2),a=t[0],n=t[1],r=Object(c.useState)(null),s=Object(i.a)(r,2),o=s[0],d=s[1],u=Object(c.useState)(null),j=Object(i.a)(u,2),m=j[0],p=j[1],g=Object(c.useState)(!1),O=Object(i.a)(g,2),v=O[0],_=O[1],x=Object(c.useState)(null),w=Object(i.a)(x,2),D=w[0],S=w[1],N=Object(c.useState)(null),y=Object(i.a)(N,2),T=y[0],C=y[1],F=Object(c.useState)(!1),L=Object(i.a)(F,2),U=L[0],M=L[1];Object(c.useEffect)((function(){a&&o&&(_(!0),f.getPastDayForecast(a,o,(function(e){p(e),_(!1)})))}),[a,o]),Object(c.useEffect)((function(){D&&(M(!0),f.getSevenDaysForecast(D,(function(e){C(e),M(!1)})))}),[D]);var I=function(e,t){t?n(e):S(e)},W=function(e){var t=h.convertDateTimeToUTCTime(e.getTime()+Math.round(h.oneDayOffset/2));d(t)},E=[{id:0,name:"\u0421\u0430\u043c\u0430\u0440\u0430",latitude:53.195873,longitude:50.100193},{id:1,name:"\u0422\u043e\u043b\u044c\u044f\u0442\u0442\u0438",latitude:53.507836,longitude:49.420393},{id:2,name:"\u0421\u0430\u0440\u0430\u0442\u043e\u0432",latitude:51.533557,longitude:46.034257},{id:3,name:"\u041a\u0430\u0437\u0430\u043d\u044c",latitude:55.796127,longitude:49.106405},{id:4,name:"\u041a\u0440\u0430\u0441\u043d\u043e\u0434\u0430\u0440",latitude:45.03547,longitude:38.975313}];return Object(l.jsxs)("div",{className:"app",children:[Object(l.jsx)("header",{className:"app__header",children:Object(l.jsxs)("p",{className:"app__title",children:[Object(l.jsx)("span",{children:"Weather"}),Object(l.jsx)("span",{children:"forecast"})]})}),Object(l.jsxs)("main",{className:"app__main",children:[Object(l.jsx)("div",{className:"app__forecast-column",children:Object(l.jsx)(b,{isSingleDateForecast:!1,cities:E,forecastData:T,isLoading:U,changeSelectedCity:I,changeSelectedDate:W})}),Object(l.jsx)("div",{className:"app__forecast-column",children:Object(l.jsx)(b,{isSingleDateForecast:!0,cities:E,forecastData:m,isLoading:v,changeSelectedCity:I,changeSelectedDate:W})})]}),Object(l.jsx)("footer",{className:"app__footer",children:"C \u041b\u042e\u0411\u041e\u0412\u042c\u042e \u041e\u0422 MERCURY DEVELOPMENT"})]})};s.a.render(Object(l.jsx)(n.a.StrictMode,{children:Object(l.jsx)(g,{})}),document.getElementById("root"))}],[[17,1,2]]]);
//# sourceMappingURL=main.c397285f.chunk.js.map